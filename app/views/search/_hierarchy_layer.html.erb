<% if id && @hierarchy_data.dig(id) %>
  <details class="<%= @hierarchy_data.dig(id, :children).any? ? 'hierarchy-expander' : 'hierarchy-static' %>" style="padding-left: <%= 10 + (10 * (tier - 1)) %>px;" name="type-tier-<%= tier %>">
    <summary>
      <%= link_to "#{@hierarchy_data.dig(id, :name)} (#{(@search_data.facets.select { |h| h.dig(:field_name) == "type_sesrollup" }.first.dig(:facets).to_h.dig(id.to_s))})", url_for(replace_filter_url(request.params, 'type_sesrollup', id)), class: 'modifiable-link' %>
    </summary>
    <% @hierarchy_data.dig(id, :children).each do |child| %>
      <% if @search_data.content_type_rollup_ids.include?(child.dig(:id)) %>
        <%= render 'hierarchy_layer', id: child.dig(:id), tier: tier + 1, parent_id: id %>
      <% end %>
    <% end %>
  </details>
<% end %>